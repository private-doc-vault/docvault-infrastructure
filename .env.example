# DocVault Environment Configuration
# Copy this file to .env and update with your actual values

# ============================================================================
# Application Environment
# ============================================================================
APP_ENV=prod
APP_DEBUG=0
APP_SECRET=change-this-to-a-random-secret-key-min-32-chars

# ============================================================================
# PostgreSQL Database Configuration
# ============================================================================
POSTGRES_DB=docvault
POSTGRES_USER=docvault
POSTGRES_PASSWORD=change-this-secure-password
POSTGRES_PORT=5432
DATABASE_URL=postgresql://docvault:change-this-secure-password@postgres:5432/docvault

# ============================================================================
# Redis Configuration
# ============================================================================
REDIS_PASSWORD=change-this-redis-password
REDIS_PORT=6379
REDIS_URL=redis://:change-this-redis-password@redis:6379/0

# ============================================================================
# Meilisearch Configuration
# ============================================================================
MEILISEARCH_KEY=change-this-master-key-min-16-chars
MEILISEARCH_HOST=http://meilisearch:7700
MEILISEARCH_PORT=7700
MEILI_ENV=production
MEILI_LOG_LEVEL=INFO

# ============================================================================
# OCR Service Configuration
# ============================================================================
OCR_SERVICE_URL=http://ocr-service:8000
OCR_WEBHOOK_SECRET=change-this-webhook-secret-min-32-chars-must-match-backend

# Tesseract OCR languages (comma-separated ISO codes)
# Available: eng, deu, fra, spa, ita, pol, nld, rus, jpn, chi_sim, chi_tra
TESSERACT_LANGUAGES=eng,deu,fra,spa,ita,pol

# OCR Worker settings
WORKER_POLL_INTERVAL=1.0
WORKER_MAX_RETRIES=3
LOG_LEVEL=INFO

# Backend URL for OCR webhooks
BACKEND_URL=http://nginx

# ============================================================================
# JWT Authentication Configuration
# ============================================================================
# Path to JWT keys inside backend container
JWT_SECRET_KEY=%kernel.project_dir%/config/jwt/private.pem
JWT_PUBLIC_KEY=%kernel.project_dir%/config/jwt/public.pem
JWT_PASSPHRASE=change-this-jwt-passphrase-secure

# ============================================================================
# Frontend Configuration
# ============================================================================
# API URL for frontend (relative path for same-origin requests)
VITE_API_URL=/api
VITE_APP_VERSION=1.0.0

# ============================================================================
# Development-Only Settings (for docker-compose.dev.yml)
# ============================================================================
# Uncomment and modify these when using development mode

# APP_ENV=dev
# APP_DEBUG=1
# MEILI_ENV=development
# MEILI_LOG_LEVEL=DEBUG
# LOG_LEVEL=DEBUG
# POSTGRES_PASSWORD=docvault_pass
# DATABASE_URL=postgresql://docvault:docvault_pass@postgres:5432/docvault
# REDIS_PASSWORD=redis_pass
# REDIS_URL=redis://:redis_pass@redis:6379/0
# MEILISEARCH_KEY=masterKey
# OCR_WEBHOOK_SECRET=dev-webhook-secret-min-32-chars-long
# JWT_PASSPHRASE=dev-passphrase

# ============================================================================
# Storage Configuration
# ============================================================================
# These are container-internal paths (mapped via docker-compose volumes)
# You generally don't need to change these
DOCUMENTS_STORAGE_PATH=/var/www/html/storage/documents
TEMP_STORAGE_PATH=/var/www/html/storage/temp
SHARED_STORAGE_PATH=/var/www/html/storage/documents

# ============================================================================
# Security Notes
# ============================================================================
# 1. NEVER commit the .env file to version control
# 2. Use strong, randomly generated secrets for production
# 3. Change ALL default passwords and keys
# 4. OCR_WEBHOOK_SECRET must match between backend and OCR service
# 5. Generate secure JWT keys using: php bin/console lexik:jwt:generate-keypair
# 6. Minimum recommended lengths:
#    - APP_SECRET: 32 characters
#    - Passwords: 16+ characters
#    - MEILISEARCH_KEY: 16+ characters
#    - OCR_WEBHOOK_SECRET: 32+ characters
#    - JWT_PASSPHRASE: 16+ characters

# ============================================================================
# Port Mapping (Host Machine)
# ============================================================================
# Uncomment to customize host ports (default values shown)
# HTTP_PORT=80
# HTTPS_PORT=443
# POSTGRES_PORT=5432
# REDIS_PORT=6379
# MEILISEARCH_PORT=7700
# OCR_PORT=8001
# VITE_DEV_PORT=5173
